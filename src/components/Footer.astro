---
import { siteConfig } from "../config";
import { Icon } from "astro-icon/components";

// Calculate experience
const getCurrentYear = new Date().getFullYear();
const startYear = 2017; // From your experience: August 2019 - July 2022 was your first role
const yearsOfExperience = getCurrentYear - startYear;

const status = {
  availability: "Open to opportunities",
  experience: `${yearsOfExperience}+ years`,
  location: "Remote / Germany",
  response_time: "<24 hours",
};
---

<footer
  class="relative py-20 md:py-24 px-6 md:px-12 lg:px-16 border-t border-[var(--theme-border)] overflow-hidden"
>
  <!-- Subtle terminal grid background -->
  <div class="footer-grid absolute inset-0 opacity-[0.02]"></div>

  <div class="max-w-6xl mx-auto relative">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-16">
      <!-- Left: CTA Section -->
      <div class="lg:col-span-7 space-y-8">
        <p
          class="text-2xl md:text-3xl lg:text-4xl font-semibold text-[var(--theme-text-primary)] leading-tight mb-6"
        >
          Let's build something.
        </p>

        <a
          href={`mailto:${siteConfig.social.email}`}
          class="email-link group inline-flex items-center gap-3"
        >
          <span class="relative">
            <span class="text-base md:text-lg text-[var(--theme-accent)]"
              >{siteConfig.social.email}</span
            >
            <span class="email-underline"></span>
          </span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="arrow-icon transition-transform duration-300"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M5 12l14 0"></path>
            <path d="M13 18l6 -6"></path>
            <path d="M13 6l6 6"></path>
          </svg>
        </a>
      </div>

      <!-- Right: Status Panel -->
      <div class="lg:col-span-5">
        <div class="status-panel">
          <div class="panel-header">
            <span class="panel-dots">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
            </span>
            <span class="panel-title">status.json</span>
          </div>

          <div class="panel-content font-mono text-xs md:text-sm">
            <span class="text-[var(--theme-text-secondary)]">{"{"}</span>
            {
              Object.entries(status).map(([key, value], index) => (
                <div class="status-line pl-2 md:pl-4">
                  <span class="key">"{key}"</span>
                  <span class="colon">:</span>
                  <span
                    class:list={[
                      "value",
                      typeof value === "number" ||
                      (typeof value === "string" && value.match(/^\d/))
                        ? "number"
                        : "string",
                    ]}
                  >
                    "{value}"
                  </span>
                  {index < Object.keys(status).length - 1 && (
                    <span class="text-[var(--theme-text-secondary)]">,</span>
                  )}
                </div>
              ))
            }
            <span class="text-[var(--theme-text-secondary)]">{"}"}</span>
          </div>
        </div>

        <!-- Social navigation -->
        <nav class="social-nav">
          {
            siteConfig.social?.linkedin && (
              <a
                href={siteConfig.social.linkedin}
                target="_blank"
                rel="noopener noreferrer"
                class="social-item"
              >
                <Icon name="simple-icons:linkedin" width="16" height="16" />
                <span>LinkedIn</span>
                <span class="arrow">→</span>
              </a>
            )
          }
          {
            siteConfig.social?.github && (
              <a
                href={siteConfig.social.github}
                target="_blank"
                rel="noopener noreferrer"
                class="social-item"
              >
                <Icon name="simple-icons:github" width="16" height="16" />
                <span>GitHub</span>
                <span class="arrow">→</span>
              </a>
            )
          }
        </nav>
      </div>
    </div>

    <!-- Bottom bar with terminal command -->
    <div class="mt-16 pt-8 border-t border-[var(--theme-border)]">
      <div class="flex flex-col md:flex-row items-center justify-between gap-4">
        <p
          class="text-xs font-mono text-[var(--theme-text-secondary)] opacity-50"
        >
          © {getCurrentYear}
          {siteConfig.name}.
        </p>

        <div
          class="flex items-center gap-2 text-xs font-mono text-[var(--theme-text-secondary)] opacity-40"
        >
          <span class="status-indicator"></span>
          <span>Build v1.0.0 :: stable</span>
        </div>
      </div>
    </div>
  </div>
</footer>

<style>
  /* Terminal grid background */
  .footer-grid {
    background-image:
      linear-gradient(var(--theme-border) 1px, transparent 1px),
      linear-gradient(90deg, var(--theme-border) 1px, transparent 1px);
    background-size: 20px 20px;
    mask-image: linear-gradient(
      to bottom,
      transparent,
      black 10%,
      black 90%,
      transparent
    );
    -webkit-mask-image: linear-gradient(
      to bottom,
      transparent,
      black 10%,
      black 90%,
      transparent
    );
  }

  /* Email link styling */
  .email-link {
    text-decoration: none;
    transition: transform 0.2s ease;
  }

  .email-link:hover {
    transform: translateX(4px);
  }

  .email-underline {
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background: var(--theme-accent);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
  }

  .email-link:hover .email-underline {
    transform: scaleX(1);
  }

  .email-link:hover .arrow-icon {
    transform: translateX(4px);
    color: var(--theme-accent);
  }

  /* Status panel (terminal window) */
  .status-panel {
    border: 1px solid var(--theme-border);
    border-radius: 6px;
    overflow: hidden;
    background: var(--theme-bg);
    margin-bottom: 16px;
  }

  .panel-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 14px;
    border-bottom: 1px solid var(--theme-border);
    background: rgba(0, 0, 0, 0.02);
  }

  body.dark .panel-header {
    background: rgba(255, 255, 255, 0.02);
  }

  .panel-dots {
    display: flex;
    gap: 6px;
  }

  .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }

  .dot.red {
    background: #ff5f57;
    border: 1px solid #e0443e;
  }

  .dot.yellow {
    background: #febc2e;
    border: 1px solid #d89e24;
  }

  .dot.green {
    background: #28c840;
    border: 1px solid #1aab29;
  }

  .panel-title {
    font-size: 11px;
    color: var(--theme-text-secondary);
    font-weight: 500;
  }

  .panel-content {
    padding: 14px;
  }

  .status-line {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding-top: 4px;
    padding-bottom: 4px;
    line-height: 1.6;
  }

  .status-line:last-child {
    padding-bottom: 0;
  }

  .key {
    color: var(--theme-accent);
  }

  .colon {
    color: var(--theme-text-secondary);
  }

  .value {
    color: var(--theme-text-primary);
  }

  .value.string {
    color: var(--theme-text-secondary);
  }

  /* Social navigation */
  .social-nav {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .social-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    border: 1px solid var(--theme-border);
    border-radius: 6px;
    font-family: "IBM Plex Mono", monospace;
    font-size: 12px;
    color: var(--theme-text-secondary);
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .social-item svg {
    flex-shrink: 0;
    transition: transform 0.2s ease;
  }

  .social-item .arrow {
    margin-left: auto;
    opacity: 0;
    transform: translateX(-8px);
    transition: all 0.2s ease;
  }

  .social-item:hover {
    border-color: var(--theme-accent);
    color: var(--theme-accent);
    background: rgba(15, 76, 92, 0.03);
  }

  body.dark .social-item:hover {
    background: rgba(88, 166, 184, 0.08);
  }

  .social-item:hover svg {
    transform: scale(1.1);
  }

  .social-item:hover .arrow {
    opacity: 1;
    transform: translateX(0);
  }

  /* Status indicator pulse */
  .status-indicator {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--theme-accent);
    animation: statusPulse 2s ease-in-out infinite;
  }

  @keyframes statusPulse {
    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.5;
      transform: scale(0.9);
    }
  }

  /* Section number styling (kept for consistency) */
  .section-number {
    position: absolute;
    font-family: "IBM Plex Mono", monospace;
    font-size: 4rem;
    font-weight: 700;
    color: var(--theme-text-secondary);
    opacity: 0.05;
    line-height: 1;
    pointer-events: none;
  }

  @media (max-width: 768px) {
    .section-number {
      font-size: 3rem;
    }
  }
</style>
